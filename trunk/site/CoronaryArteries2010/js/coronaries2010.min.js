var bsa, zlimit = 2, sites = { LMCA: { label: "LMCA", data: { a1: -0.1817, b1: 2.9238, a2: 0.1801, b2: 0.253} }, LAD: { label: "LAD", data: { a1: -0.1502, b1: 2.2672, a2: 0.1709, b2: 0.2293} }, CIRC: { label: "CIRC", data: { a1: -0.2716, b1: 2.3458, a2: 0.1142, b2: 0.3423} }, PROXRCA: { label: "PROXRCA", data: { a1: -0.3039, b1: 2.7521, a2: 0.1626, b2: 0.2881} }, MIDRCA: { label: "MIDRCA", data: { a1: -0.306, b1: 2.4078, a2: 0.1324, b2: 0.3259} }, DISTRCA: { label: "DISTRCA", data: { a1: -0.3185, b1: 2.3295, a2: 0.1099, b2: 0.3198}} }; function mean(a) { return a.a1 + a.b1 * Math.sqrt(bsa) }
function sd(a) { return a.a2 + a.b2 * Math.sqrt(bsa) } function zscore(a, b) { return (b - mean(a)) / sd(a) } function range(a) { var b, c; c = zlimit; b = (mean(a) - c * sd(a)).toFixed(2); a = (mean(a) + c * sd(a)).toFixed(2); return "(" + b + " - " + a + ")" }
function CalculateZScores() { var a, b, c; a = parseFloat($("#txtHT").val()); b = parseFloat($("#txtWT").val()); c = $("#cmbBSA").val(); if (a && b) bsa = CalcBSA(a, b, c); else if (b && c == "Dreyer") bsa = CalcBSA("", b, c); else return false; $("#BSA").html(bsa.toFixed(2) + " M<sup>2</sup>").attr("title", bsa); $.each(sites, function() { var d, e, f; d = $("#" + this.label + "Mean"); e = $("#" + this.label + "Range"); f = mean(this.data).toFixed(2); d.text(f); d = range(this.data); e.text(d) }); $(".site").change() }
function updateSite(a, b) { b = parseFloat(b); a = sites[a]; var c = $("#" + a.label + "Z"); if (bsa && !isNaN(b)) { var d = zscore(a.data, b); c.text(d.toFixed(2)).removeClass("normal borderline mild moderate severe").addClass(zscoreFlag(d)).attr("title", calcPercentile(d) + " %-ile") } else c.text("").removeClass("normal borderline mild moderate severe").attr("title", "") } function resetForm() { $("#BSA, .results").text("").removeClass("normal borderline mild moderate severe").attr("title", ""); bsa = null };