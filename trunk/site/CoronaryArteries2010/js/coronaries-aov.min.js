var aov; var zlimit = 2.0; var sites = { 'LMCA': { label: 'LMCA', data: { a1: 0.3593, b1: 0.1398, se: 0.3507} }, 'LAD': { label: 'LAD', data: { a1: 0.2364, b1: 0.1109, se: 0.3409} }, 'CIRC': { label: 'CIRC', data: { a1: 0.1940, b1: 0.1081, se: 0.3673} }, 'PROXRCA': { label: 'PROXRCA', data: { a1: 0.1812, b1: 0.1320, se: 0.3579} }, 'MIDRCA': { label: 'MIDRCA', data: { a1: 0.1827, b1: 0.1104, se: 0.3748} }, 'DISTRCA': { label: 'DISTRCA', data: { a1: 0.2191, b1: 0.1003, se: 0.3627}} }; function mean(o) { return o.a1 + o.b1 * aov } function zscore(o, score) { return (score - mean(o)) / o.se } function range(o) { var min, max, z; z = zlimit; min = (mean(o) - z * o.se).toFixed(2); max = (mean(o) + z * o.se).toFixed(2); return '(' + min + ' - ' + max + ')' } function CalculateZScores() { aov = parseFloat($('#txtAOV').val()); $.each(sites, function() { var meanElement, rangeElement, str_mean, str_range; meanElement = $('#' + this.label + 'Mean'); rangeElement = $('#' + this.label + 'Range'); str_mean = mean(this.data).toFixed(2); meanElement.text(str_mean); str_range = range(this.data); rangeElement.text(str_range) }); $('.site').change() } function updateSite(site, value) { value = parseFloat(value); site = sites[site]; var zelement = $('#' + site.label + 'Z'); if (aov && !isNaN(value)) { var z = zscore(site.data, value); zelement.text(z.toFixed(2)).removeClass('normal borderline mild moderate severe').addClass(zscoreFlag(z)).attr('title', calcPercentile(z) + ' %-ile') } else { zelement.text('').removeClass('normal borderline mild moderate severe').attr('title', '') } } function resetForm() { $('.results').text('').removeClass('normal borderline mild moderate severe').attr('title', ''); bsa = null }