var bsa, gender, sites = { boys: { AVA: { label: "AVA", data: { intercept: 2.78, slope: 0.47, mse: 0.1, sFactor: 19.57} }, Sinuses: { label: "Sinuses", data: { intercept: 3.1, slope: 0.49, mse: 0.1, sFactor: 26.95} }, STJ: { label: "STJ", data: { intercept: 2.9, slope: 0.47, mse: 0.1, sFactor: 22.29} }, AAO: { label: "AAO", data: { intercept: 2.9, slope: 0.46, mse: 0.11, sFactor: 22.74}} }, girls: { AVA: { label: "AVA", data: { intercept: 2.75, slope: 0.44, mse: 0.1, sFactor: 19.11} }, Sinuses: { label: "Sinuses", data: { intercept: 3.1, slope: 0.44, mse: 0.09, sFactor: 26.36} }, STJ: { label: "STJ",
    data: { intercept: 2.9, slope: 0.42, mse: 0.09, sFactor: 21.76}
}, AAO: { label: "AAO", data: { intercept: 2.9, slope: 0.46, mse: 0.1, sFactor: 22.2}}}
}; function mean(a) { return a.intercept + a.slope * Math.log(bsa) } function uln(a) { return a.sFactor * Math.pow(bsa, a.slope) }
function CalculateZScores() { var a, b, c; a = parseFloat($("#txtHT").val()); b = parseFloat($("#txtWT").val()); gender = $("#cmbGender").val(); c = $("#cmbBSA").val(); if (a && b) bsa = CalcBSA(a, b, c); else if (b && c == "Dreyer") bsa = CalcBSA("", b, c); else return false; $("#BSA").html(bsa.toFixed(2) + " M<sup>2</sup>"); $.each(sites[gender], function() { var d, e, f; d = $("#" + this.label + "Mean"); e = $("#" + this.label + "ULN"); f = Math.exp(mean(this.data)).toFixed(2); d.text(f); d = uln(this.data).toFixed(2); e.text(d) }); $(".site").change() }
function zscore(a, b) { var c; c = mean(a); b = Math.log(b); return (b - c) / a.mse } function updateSite(a, b) { b = parseFloat(b); a = sites[gender][a]; var c = $("#" + a.label + "Z"); if (bsa && !isNaN(b)) { a = zscore(a.data, b); c.text(a.toFixed(2)).removeClass("normal borderline mild moderate severe").addClass(zscoreFlag(a)).attr("title", calcPercentile(a) + " %-ile") } else c.text("").removeClass("normal borderline mild moderate severe").attr("title", "") }
function resetForm() { $("#BSA, .results").text("").removeClass("normal borderline mild moderate severe"); bsa = null };